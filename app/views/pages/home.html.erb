<h1 class="text-center">Pages#home</h1>

<div class="container text-center">
  <div class="row inline">
    <div class="col-sm-3">
      <div class="name-search">
        <%= form_tag root_path, method: :get  do %>
        <%= text_field_tag :query, params[:query], type: "search", class: "form-control", 
          placeholder: "search by name", onsearch: "toggleDisplay()" %>
        <%  end %>
        <script>
          function toggleDisplay(){
            var button = document.getElementById('location');
            if (button.style.display === "block"){
              button.style.display = "none";
            }else{
              button.style.display = "block";            
            }
          }
        </script>
      </div>
    </div>
    <div class="col-sm-3">
      <%= button_tag 'Location', class: "location-search btn btn-primary", onclick: "buttonDisappear()" %>
      <script>
        function buttonDisappear(){
          var button = document.getElementById('location');
          if (button.style.display === "block"){
            button.style.display = "none";
          } else {
            button.style.display = "block";
          }
        }
      </script>
    </div>
    <div class="col-sm-3 ">
      <%= button_tag'Tags', class: "tags-search btn btn-primary", onclick: "toggleFunction()"  %>
      <script>
        function toggleFunction(){
          var button = document.getElementById('tags');
          if (button.style.display === "none"){
            button.style.display = "block";
          } else {
            button.style.display = "none";
          }
        }
      </script>
    </div>
  </div>

  <div class="row">
    <div class="col-sm-3">
      <div id="contacts">
        <% if params[:query].present? %>
          <% @contacts.each do |contact|  %>
            <h4><%= link_to contact.first_name, contact_milestones_path(contact) %></h4>
          <% end %>
        <% end %>
      </div>
    </div>
  

    <div class="col-sm-3">
      <div id="location" style="display: none;">
        <% @my_locations.each do |location|  %>
          <h4>
              <%= link_to location.title, root_path(location_id: location.id), onclick: "showLocation()"  %>
          </h4>
        <%  end  %>
        
        <script>
          function showLocation(){
            var button = document.getElementById('contact-location');
            if (button.style.display === "block"){
              button.style.display = "none";
            } else {
              button.style.display = "block";
            }
          }
        </script>
      </div>
    </div> 
    <div class="col-sm-3">
      <div id="tags" style="display: none;">
        <% @tag_names.each do |tag|  %>
          <h4><%= link_to tag.title, root_path(tag_id: tag.id), onclick:"showTags()" %></h4>
        <% end %>
        <script>
          function showTags(){
            var button = document.getElementById('tags-contacts');
            if (button.style.display === "block"){
              button.style.display = "none";
            } else {
              button.style.display = "block";
            }
          }
        </script>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-3">
      <div id="tags-contacts" style="display: block;">
         <% if params[:tag_id].present? %>
            <%  @list_of_contacts.each   do |contact| %>
              <h4><%= link_to contact.first_name, contact_milestones_path(contact) %></h4>
              <h4><%= contact.email %></h4>
            <% end %>
        <% end %>
      </div>
    </div>
    <div class="col-sm-3">
      <div id="contact-location" style="display: block;">
         <%if params[:location_id].present? %>
            <% @contacts_for_location.each do |contact| %>
              <!-- Rooted Back To Home until cards installed -->
              <h4><%=link_to contact.first_name, contact_milestones_path(contact.id) %></h4>
              <h4><%= contact.email %></h4>
            <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="recent-activity">
  <% @sorted_milestones.each do |milestone|%>
    <h4><%= milestone.contact.first_name + ": " + milestone.contact.email%></h4>
    <h5><%= milestone.location.title %></h5>
  <% end %>
</div>
 <!-- Allow searches to stay visible when value is entered into search -->
